#RパッケージAmeliaをインストールする．
#この作業は1回だけ行えばよく，次回からは実行しなくてよい．
install.packages("Amelia")

#library関数で，Ameliaを呼び起こす．
library(Amelia)

#data.frame関数によって，新たなデータフレームdf1として，多重代入法に使用する変数（zとy）だけを取り出す．
df1 <- data.frame(z, y)

#多重代入済みデータの個数を100に設定して，M1と名付ける．
M1 <- 100

#多重代入法も乱数を用いる手法なので，同じ結果を再現できるようにシード値を固定する．
set.seed(1)

#amelia関数により，多重代入法を実行する．
#構文は以下のとおり．amelia(データフレームの名前, m = 多重代入済みデータの個数) 
a.out <- amelia(df1, m = M1)

#多重代入法で欠測値を処理したデータを表示してみよう．
#100セットあるうちの，1個目のデータセットである．
#m = 1
a.out$imputations[[1]]

#100セットあるうちの，2個目のデータセットである．
#m = 2
a.out$imputations[[2]]

#以下，同じ要領で，100セットのデータセットの中身を閲覧できる．
#m = 3
a.out$imputations[[3]]

#m = 4からm = 99は省略

#m = 100
a.out$imputations[[100]]
